# Отчет по модулю 1

## Введение

Основная цели:

- Изучение концепции базы знаний
- Знакомство с языком программирования Prolog и построение базы знаний с его помощью, реализация набора запросов к этой базе знаний
- Знакомство со средой разработки онтологий Protege и создание онтологической формы базы знаний из предыдущего пункта
- Разработка рекомендательной системы на ином языке программирования, которая будет использовать базу знаний

Данный модуль знакомит с понятиями онтологии и базы знаний (совокупности онтологии и сведениях о конкретных объектах). Для практического понимания поставлены задачи на изучение работы с Prolog, Protege как инструментов для построения баз знаний.

## Анализ требований

### Требования к базе знаний (ЛР1.1)

База знаний должна включать в себя не менее 20 фактов с одним аргументом, 10-15 фактов с двумя аргументам, которые дополняют и показывают связь с другими фактами и 5-7 правил. Факты могут описывать объекты, их свойства и отношения между ними. Факты 2 и более аргументами могут описывать различные атрибуты объектов, а правила - логические законы и выводы, которые можно сделать на основе фактов и предикатов.

### Требования к онтологии (ЛР1.2)

Преобразовать факты и отношения из Prolog в концепты и свойства в онтологии. Описать классы и свойства в онтологии, которые соответствуют объектам и отношениям из базы знаний. Например, если у были классы "Человек" и "Машина" и свойство "возраст", создайте аналогичные классы и свойства в онтологии в Protege.

### Требования к системе поддержки принятия решения (ЛР2)

- Создать программу, которая позволяет пользователю ввести запрос через командную строку. Например, информацию о себе, своих интересах и предпочтениях в контексте выбора видеоигры - на основе фактов из БЗ (из первой лабы)/Онтологии(из второй).
- Использовать введенные пользователем данные, чтобы выполнить логические запросы к  БЗ/Онтологии.
- На основе полученных результатов выполнения запросов, система должна предоставить рекомендации или советы, связанные с выбором из БЗ или онтологии.
- Система должна выдавать рекомендации после небольшого диалога с пользователем.

## Изучение основных концепций и инструментов

Для начала, понятия и концепции:

- Онтология - подробная формализация определенной области знаний (воспринимаемая некой программой). Состоит из фактов, предикатов, правил в рамках предметной области.
- База знаний - это совокупность онтологии (вместе с фактами и правилами) и экземпляров.
- Факт - некоторая "правда" в рамках онтологии.
- Имеются классы/сущности (в их привычном понимании), а также их отношения с другими классами (через предикаты). Таким же образом задаются атрибуты.

Prolog - декларативный язык программирования для описания баз знаний, фактов и правил.

Примеры фактов в prolog (в конце каждого "выражения" ставится `.`):

```prolog
% собака - это животное.
animal(dog).

% Билл - родитель Роберта.
parent('Bill', 'Robert').
```

Пример правила:

```prolog
% Некий A является бабушкой/дедушой некого B, в том случае, если есть C, который является родителем B и родителем которого является A.
grandparent(A, B) :- parent(A, C), parent(C, B).
```

Операторы:

- `\+` - НЕ
- `,` - И
- `;` - ИЛИ
- `==` - Равно
- `\==` - Не равно
- Привычные GT, GE, LT, LE (`>`)
- и т.д.

Консольное приложение для работы - `swi-prolog`. Поддерживает как полностью интерактивный режим, так и с файлом.

Для разработки рекомендательной системы я выбрал python. Библиотека - `pyswip` - является удобной прослойкой для работы с prolog-базами знаний из Python.

Пример:

```python
prolog = Prolog()
prolog.consult("cool.pl")

result = prolog.query("grandparent('Bill', 'Robert')")

print(result)
```

## Реализация системы искусственного интеллекта (системы поддержки принятия решений)

Исходный код можно посмотреть в директории [lab2](lab2/)

В рамках ЛР было принято решение сделать систему рекомендации мониторов.

Пример полного описания монитора:

```prolog
monitor('LG 27UD68-W').
monitor_size('LG 27UD68-W', 27).
monitor_resolution('LG 27UD68-W', '4K').
monitor_refresh_rate('LG 27UD68-W', 60).
```

Помимо этого, на уровне prolog я решил добавить ряд запросов-правил для упрощенной фильтрации, например:

```prolog
monitor_for_work(Monitor) :-
    monitor(Monitor),
    monitor_refresh_rate(Monitor, 60).
```

Система позволяет работать в двух режимах:

- В упрощенном режиме, система интересуется, для чего пользователю монитор. Пользователь может ответить `работа`, `рисование`, `игры`, `консольные игры` - и получить подборку оптимальных мониторов по предназначению.
- В обычном режиме, пользователь дает запрос в определенном формате (например, `хочу средний монитор с хорошим разрешением, играю`) и система выводит подходящие мониторы (или факт их отсутствия).

## Оценка и интерпретация результатов

Пример запроса к БЗ:

```prolog
% Каких игроков может повергнуть ударом в спину terry (шпион команды BLU)?
can_backstab_player('terry', TargetPlayerName).
```

Пример DL-запроса к онтологии (вывести шпион(а/ов) команды BLU):

```text
player and (player_team value blu) and (player_class value spy)
```

Система соответствует требованиям:

- Интерфейс в командной строке
- Используется пользовательский ввод для выполнения запросов к БЗ
- На основе запроса система дает рекомендации на основе данных из БЗ
- Есть диалог с пользователем

Дальнейшим логичным улучшением системы является использование библиотек для парсинга человеческого текста (или, если смотреть еще дальше - полноценный, основанный на ИИ анализатор текста) - тогда пользователь сможет вводить запрос в более свободном виде.

## Заключение

Получившаяся система позволяет в удобном, человекочитаемом виде сообщать о своем пожелании - и система выдаст подходящие мониторы.

В текущем виде система представляет собой упрощенную систему рекомендаций - основу современных онлайн-магазинов. В них, помимо логики "фильтрации по параметрам" используется больше различной логики, которая уже может быть не связана с базой знаний (внешние параметры и пр.)

В общем и целом, Prolog - довольно качественный способ описания базы знаний и реально взаимодействия с ней. Однако, в реальных условиях применять Prolog довольно проблематично из-за примитивности языка и окружающей экосистемы и "теоретического" характера происходящего.

Однако сама идея баз знаний имеет место быть, в каком-то виде она представлена, например, в системе отслеживания задач (jira).
