Перефразируя, в задаче требуется проверить, можно ли разделить граф на 2 части так, чтобы каждая вершина была соединена только с вершиной из другой группы или не была соединена ни с кем - тут явно напрашиваются раскраски.

Идея в том, что для каждой компоненты связанности (dfs и массив пройденных вершин) проверяется, можно ли ее разделить таким образом. Для этого, красим первую вершину в цвет А, всех ее соседей - в цвет Б. Если в какой-то момент мы обнаруживаем соседа с цветом, равным нашему, то это значит, что мы нашли "замыкание" - связь вершин из одной группы, что по условию задачи, является невалидным случаем. Достаточно нахождения одного такого случая, чтобы назвать весь граф невалидным. В противном же случае, мы просто пройдемся по всем компонентам, раскрасив соседей, и в итоге получим граф, где соседи вершины покрашены в отличный от текущего цвет.

**Временная сложность**: O(n + m) - проход по всем вершинам
**Память**: O(n * m) - хранение графа, массива цветов
