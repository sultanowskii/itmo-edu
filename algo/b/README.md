Упрощая описание задачи, требуется проверить, можно ли составить отрезки ЖИВОТНОЕ-ЛОВУШКА так, чтобы они не пересекались (расположены по кругу). Задача по своей сути очень похожа на скобочную последовательность - за тем лишь исключением, что в данном случае "закрывающаяся скобка" может идти до "открывающейся" а также начало и конец "скреплены" - зациклено. Из-за того, что порядок животное/ловушка внутри пары неважно, "замкнутость" тоже не играет роли - до подходящей пары можно дойти, идя в обе стороны.

Тогда, оптимально будет поддерживать стек ожидающих своей пары ловушек и животных. Если текущий рассматриваемый элемент - подходящая "пара" для вершины стека, то он выходит из "ожидающих" - мы нашли ему пару. Если же они несовместимы, то текущий тоже становится ожидающим. Если в конце обхода у нас есть ожидающие элементы, то непересекающихся отрезков с ними построить нельзя - решения не существует.

Для валидных же случаев еще необходимо хранить соответствие номер ловушки - номер животного для правильного вывода ответа.

**Временная сложность**: O(n) (один цикл по N элементов)
**Память**: O(n + n/2) = O(1.5n) = O(n) (стек ожидающих и массив соответствий номер ловушки - номер животного)
