Задачу можно воспринимать как эмулятор поддержки областей видимости переменных. Тогда в решении напрашивается стек - подобно тому, как реальные программы поддерживают локальные переменные.

Основная идея - хранениие и поддержание стека для каждой переменной как ее "истории". Эти стеки хранятся в соответствии "название переменной - ее стек" (в виде map-ы стеков). Помимо этого, важно при "выныривании" из области видимости удалять со стеков только те значения, что задавались на этом уровне - для этих целей используется стек сетов, в котором для каждого уровня хранится набор переменных, определенных (или переопределенных) в данной области видимости.

**Временная сложность**: O(n * n) = O(n^2) (цикл по строкам и вложенное в него удаление переменных при выходые из области)
**Память**: O(n)
