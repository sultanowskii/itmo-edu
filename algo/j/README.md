Основная проблема задачи - в обращении к середине очереди с возможностью вставки - решается наличием двух очередей-половинок и поддержанием середины между ними в начале "правой" - каждый раз балансируем длину очередей, отдавая приоритет левой, чтобы вставка в начало правой очереди давала желаемый результат. С учетом сказанного, далее задача сводится к простому исполнению действий по условию.

**Временная сложность**: O(n) - проход по всем запросам.
**Память**: O(n) - две очереди, хранящие элементы.
